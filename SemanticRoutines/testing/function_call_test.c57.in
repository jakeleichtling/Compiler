/*
function_call_test.c57.in
-demonstrates correct behavior of function
 calls with various parameters and return types

Derek Salama & Jake Leichtling
CS57
5/29/2013

-----------------------------------------------

Testing for:
	-Parameters
		-int (29)
		-double (43)
		-array of int (29)
		-array of double (58)
	-Function declaration (29)
	-Function with void param (83)
	-Function with empty parens (88)
	-Function with multiple params (29)
	-Function with array param (29)
	-Function returning
		-void (29)
		-int (58)
		-double (43)
	-Actual parameters that are
		-Global arrays (111)
		-Local arrays (108)
		-Formal array parameters (77)
*/

int global_int_array[10];
double global_double_array[10];

/* void return type*/
/* int[] parameter */
/* int parameter */
/* multiple parameters */
void f0(int aa[], int a_size) {
	int i;
	print "\tf0: printing array param\n";
	for (i = 0; i < a_size; ++i) {
		print "\t\t";
		print aa[i];
		print "\n";
	} 
	return;
}


/* double return type */
/* double parameter */
double f1(double a) {
	print "\tf1:";
	print "\t a =";
	print a;
	print "\n";

	a = 5;
	print "\tNow a = ";
	print a;
	print "\n";
	return a;
}

/* int return type*/
/* double[] parameter */
int f2(int aa[], int a_size, double bb[], int b_size) {
	int i;

	print "\tf2:\n";
	print "\tprinting int[] param\n";
	for (i = 0; i < a_size; ++i) {
		print "\t\t";
		print aa[i];
		print "\n";
	} 
	print "\tprinting double[] param\n";
	for (i = 0; i < b_size; ++i) {
		print "\t\t";
		print bb[i];
		print "\n";
	} 


	print "\tcalling f0 with parameter array\n";
	f0(aa, a_size);

	return 1;
}

/* void parameter */
void voidftn(void) {
	return;
}

/* empty parents */
void emptyftn() {
	return;
}

void main(void) {
	int local_int_array[10];
	double local_double_array[10];
	double a = 12.3;
	double result;
	int i;

	print "Main: initializing arrays s.t. a[i] = i\n";
	for (i = 0; i < 10; ++i) {
		local_int_array[i] = i;
		global_int_array[i] = i;
		local_double_array[i] = i;
		global_double_array[i] = i;
	}

	print "\tCalling f2 with local arrays\n";
	f2(local_int_array, 10, local_double_array, 10);

	print "\tCalling f2 with global arrays\n";
	f2(global_int_array, 10, global_double_array, 10);

	voidftn();
	emptyftn();

	print "\tCalling f1 with a=";
	print a;
	print "\n";
	result = f1(a);
	print "\t\tresult of r1 = ";
	print result;
	print "\n";
}
